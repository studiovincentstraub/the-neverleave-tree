const ot="http://www.w3.org/2000/svg",$=document.getElementById("dynamic-background-svg");if($){let V=function(){if($&&_){const t=$.getBoundingClientRect();z={width:t.width,height:t.height,left:t.left,top:t.top},_=!1}},at=function(t){L||t!==p&&(t<1||t>4||(console.log(`%cFPS Monitor: Switching to Performance Level ${t}.`,"color: orange; font-weight: bold;"),p=t,o.enableShapeChanging=t===4,o.enableMouseInteraction=t>=2,o.enableCollisionDetection=t>=3))},f=function(t,i){return Math.random()*(i-t)+t},ct=function(t,i,n,s,h,r){const e=[],c=[],a=[],u=Math.PI*2/r;for(let m=0;m<r;m++){const g=m*u;c.push(g);let l=n+f(-s,s)*n;l+=f(0,h)*n,l=Math.max(n*.2,l),a.push(l),e.push({x:t+Math.cos(g)*l,y:i+Math.sin(g)*l})}return{points:e,angles:c,radii:a}},N=function(t){if(t.length<3)return"";let i=`M ${t[0].x} ${t[0].y}`;const n=t.length;for(let s=0;s<n;s++){const h=t[(s-1+n)%n],r=t[s],e=t[(s+1)%n],c=t[(s+2)%n],a=r.x+(e.x-h.x)/6,u=r.y+(e.y-h.y)/6,m=e.x-(c.x-r.x)/6,g=e.y-(c.y-r.y)/6;i+=` C ${a} ${u}, ${m} ${g}, ${e.x} ${e.y}`}return i+=" Z",i},lt=function(t){if(t=t.replace(/^#/,""),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return null;const i=parseInt(t.substring(0,2),16)/255,n=parseInt(t.substring(2,4),16)/255,s=parseInt(t.substring(4,6),16)/255,h=Math.max(i,n,s),r=Math.min(i,n,s);let e=0,c=0;const a=(h+r)/2;if(h===r)e=c=0;else{const u=h-r;switch(c=a>.5?u/(2-h-r):u/(h+r),h){case i:e=(n-s)/u+(n<s?6:0);break;case n:e=(s-i)/u+2;break;case s:e=(i-n)/u+4;break}e/=6}return{h:Math.round(e*360),s:Math.round(c*100),l:Math.round(a*100)}},rt=function(t){for(let i=t.length-1;i>0;i--){const n=Math.floor(Math.random()*(i+1));[t[i],t[n]]=[t[n],t[i]]}return t},ht=function(){P=[],$.innerHTML="",E=document.createElementNS(ot,"g"),$.appendChild(E);const{width:t,height:i}=$.getBoundingClientRect(),n=window.innerWidth,s=Math.max(o.minScaleFactor,Math.min(o.maxScaleFactor,n/o.referenceWidth)),h=o.baseLargeMinBlobSize*s,r=o.baseLargeMaxBlobSize*s,e=o.baseSmallMinBlobSize*s,c=o.baseSmallMaxBlobSize*s;let a=[];const m=rt(["#32CD32","#6BCB77","#228B22","#20C997","#98FB98"]);a=[];for(let l=0;l<o.numBlobs;l++)a.push(m[l%m.length]);const g=Math.ceil(o.numBlobs/2);for(let l=0;l<g;l++)O(l,h,r,a[l],t,i);for(let l=g;l<o.numBlobs;l++)O(l,e,c,a[l%a.length],t,i)},O=function(t,i,n,s,h,r){const e=f(i/2,n/2),c={x:f(e,h-e),y:f(e,r-e)},a=lt(s);a||console.error(`Invalid initial hex color: ${s}. Skipping blob ${t}.`);const u=ct(0,0,e,.3,.2,8),m=N(u.points),g={x:f(-1,1)*o.speedMultiplier,y:f(-1,1)*o.speedMultiplier},l=f(0,360),yt=f(-.15,.15),S=document.createElementNS(ot,"path");S.setAttribute("d",m),a?S.setAttribute("fill",s):S.setAttribute("fill","#808080"),S.setAttribute("transform",`translate(${c.x}, ${c.y}) rotate(${l})`),S.style.opacity=String(o.opacity),E.appendChild(S);const bt={id:t,pathElement:S,position:c,velocity:g,radius:e,color:s,hsl:a||{h:0,s:0,l:50},points:u.points,angle:l,angularVelocity:yt,baseAngles:u.angles,baseRadii:u.radii,deformationTime:0,deformationSpeed:f(.005,.015),deformationAmplitude:e*f(.05,.15),update:function(H,Mt,xt,St){this.deformationTime+=1;const vt=this.position.x,Ft=this.position.y,wt=this.angle;if(o.enableShapeChanging){const v=[],y=this.baseAngles.length;for(let d=0;d<y;d++){const M=this.baseAngles[d],x=this.baseRadii[d],A=Math.sin(this.deformationTime*this.deformationSpeed+M*3)*this.deformationAmplitude,F=Math.max(x*.3,x+A),R=Math.cos(M)*F,W=Math.sin(M)*F;v.push({x:R,y:W})}const b=N(v);this.pathElement.setAttribute("d",b)}if(this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.angle+=this.angularVelocity,o.enableMouseInteraction&&H){const v=this.position.x-H.x,y=this.position.y-H.y,b=v*v+y*y,d=o.mouseInfluenceRadius+this.radius*1.2,M=d*d;if(b<M&&b>0){const x=Math.sqrt(b),A=((d-x)/d)**1.5,F=Math.atan2(y,v);this.velocity.x+=Math.cos(F)*A*o.mouseForce*o.speedMultiplier*5,this.velocity.y+=Math.sin(F)*A*o.mouseForce*o.speedMultiplier*5}}const G=Math.sqrt(this.velocity.x**2+this.velocity.y**2),X=1.5*o.speedMultiplier;if(G>X&&(this.velocity.x*=X/G,this.velocity.y*=X/G),this.velocity.x*=.99,this.velocity.y*=.99,o.enableCollisionDetection)for(const y of Mt){if(this.id===y.id)continue;const b=y.position.x-this.position.x,d=y.position.y-this.position.y,M=b*b+d*d,x=(this.radius+y.radius)*.5,A=x*x;if(M<A&&M>0){const F=Math.sqrt(M),R=x-F,W=Math.atan2(d,b),$t=Math.cos(W)*R*.01,Lt=Math.sin(W)*R*.01;this.velocity.x-=$t,this.velocity.y-=Lt}}const nt=xt,st=St,q=.05*o.speedMultiplier;this.position.x<this.radius&&(this.velocity.x+=q),this.position.x>nt-this.radius&&(this.velocity.x-=q),this.position.y<this.radius&&(this.velocity.y+=q),this.position.y>st-this.radius&&(this.velocity.y-=q),this.position.x=Math.max(this.radius/2,Math.min(nt-this.radius/2,this.position.x)),this.position.y=Math.max(this.radius/2,Math.min(st-this.radius/2,this.position.y));const Y=.01,Bt=Math.abs(this.velocity.x)<Y&&Math.abs(this.velocity.y)<Y&&Math.abs(this.angularVelocity)<Y,Ct=Math.abs(this.position.x-vt)>.1||Math.abs(this.position.y-Ft)>.1,At=Math.abs(this.angle-wt)>.01;!Bt&&(Ct||At)&&this.pathElement.setAttribute("transform",`translate(${this.position.x}, ${this.position.y}) rotate(${this.angle})`)}};P.push(bt)},j=function(t){requestAnimationFrame(j);const i=t-Q;if(i<tt)return;Q=t-i%tt;const n=t-K;if(K=t,!L&&n>0){const r=1e3/n;if(D.push(r),D.length>k&&D.shift(),D.length===k){const e=D.reduce((a,u)=>a+u,0)/k;let c=p;if(e<et?c=1:e<it?c=2:e<ft?c=3:c=4,c===p)I=0;else{let a=!1;c>p?(p===1&&e>=ut||p===2&&e>=dt||p===3&&e>=pt)&&(a=!0):(p===4&&e<mt||p===3&&e<it||p===2&&e<et)&&(a=!0),a?(I++,I>=gt&&(at(c),I=0)):I=0}}}V();const s=z.width,h=z.height;E&&(B.x+=(w.x-B.x)*Z,B.y+=(w.y-B.y)*Z,E.setAttribute("transform",`translate(${B.x}, ${B.y})`)),P.forEach(r=>r.update(T,P,s,h))},U=function(){C&&(cancelAnimationFrame(C),C=null),P.length=0,T=null};const L="maxTouchPoints"in navigator&&navigator.maxTouchPoints>0||window.innerWidth<1024,o={numBlobs:L?3:4,baseLargeMinBlobSize:1e3,baseLargeMaxBlobSize:1600,baseSmallMinBlobSize:600,baseSmallMaxBlobSize:1e3,referenceWidth:1440,minScaleFactor:.5,maxScaleFactor:1.5,speedMultiplier:L?.5:1,mouseInfluenceRadius:580,mouseForce:-800,opacity:.8,enableShapeChanging:!1,enableCollisionDetection:!0,enableMouseInteraction:!0};let P=[],T=null,E=null;const w={x:0,y:0},B={x:0,y:0},Z=.05,J=-.03;let z={width:0,height:0,left:0,top:0},_=!0,p=L?1:3;const D=[],k=60;let K=performance.now(),Q=performance.now();const tt=1e3/60,et=30,ut=35,it=40,dt=45,ft=55,pt=55,mt=50;let I=0;const gt=30;let C=null;window.addEventListener("resize",()=>{_=!0}),window.addEventListener("mousemove",t=>{o.enableMouseInteraction&&(C&&cancelAnimationFrame(C),C=requestAnimationFrame(()=>{V();const i=t.clientX,n=t.clientY;T={x:i-z.left,y:n-z.top};const s=window.innerWidth/2,h=window.innerHeight/2;w.x=(i-s)*J,w.y=(n-h)*J}))}),window.addEventListener("mouseleave",()=>{T=null,w.x=0,w.y=0}),ht(),requestAnimationFrame(j),document.addEventListener("astro:before-preparation",U),document.addEventListener("beforeunload",U)}else console.error("Dynamic background SVG container not found.");
