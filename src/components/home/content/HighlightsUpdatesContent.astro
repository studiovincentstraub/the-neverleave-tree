---
import {
  allTimelineEvents,
  type TimelineEventItem,
} from "../../../data/timelineEvents";
import Button from "../../common/Button.astro";
const numberOfHighlightsToShow = 3;

const allHighlights: TimelineEventItem[] = allTimelineEvents.filter(
  (event) => event.isHighlight
);
allHighlights.sort(
  (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()
);
const highlightsToShow: TimelineEventItem[] = allHighlights.slice(
  0,
  numberOfHighlightsToShow
);

const timelineUrl = "/timeline";
function formatEventDate(dateStr: string): string {
  if (!dateStr) return "";
  try {
    const [year, month] = dateStr.split("-").map(Number);
    const date = new Date(Date.UTC(year, month - 1));
    return date.toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      timeZone: "UTC",
    });
  } catch (e) {
    console.error(`Error parsing date string "${dateStr}":`, e);
    return dateStr;
  }
}
---
<h2 slot="title" class="about-title scroll-target-title">III. THE END</h2>

<div class="about-content scroll-target-content highlights-container">
  <p>
    When will we learn to love?<br />
    When will we learn to see?
  </p>

  <p>
    A few were born with hearts wide open,<br />
    the others,<br />
    they choose to love through pain.<br />
    To be in the woods most hours of the day<br />
    must have had an impact on you<br />
    You can see the fine embroidery like crystals<br />
    Who are you<br />
    And where<br />
    Or are you many after all
  </p>

  <p>
    Can you now fly like a butterfly?<br />
    just watch a caterpillar move,<br />
    a pillar of lightheartedness,<br />
    caressing my tummy<br />
    navel of the world<br />
    rest on my navel.
  </p>

  <p>
    make me go back, back into sleep<br />
    or re-enter the universe and become a butterfly
  </p>

  <p>
    Or a fleeting star?<br />
    a one-hit wonder<br />
    this life, my life<br />
    possibly an ephemerid?<br />
    and you, the other one<br />
    the almost trapped one<br />
    a pillar in our life’s story
  </p>

  <p>
    Where are you<br />
    my beloved children<br />
    I gave birth to<br />
    I am dying of neglect
  </p>

  <p>
    Where are you?<br />
    Children of the forest
  </p>

  <p>
    Remember me, this tree:<br />
    It carries your name in stenciled air and mud.
  </p>

  <p style="white-space: pre-line;">
      And when dawn shall come<br />
      My carved up trunk will be our witness.
  </p>
</div>

<style>
  .highlights-container {
    display: block;
    gap: 1.5rem;
  }

  .highlights-container p {
    margin-bottom: 1rem;
    font-size: clamp(1rem, 1rem + 0.6vw, 1.125rem);
    line-height: 1.6;
  }
</style>
